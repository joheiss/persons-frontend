<h2>Persons List</h2>

<div class="mb-3">
  <button data-cy="button-add" class="btn btn-primary" (click)="addPerson()">
    <i class="bi bi-plus-circle"></i> Add Person
  </button>
</div>

@if (loading) {
  <div class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
} @else {
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>UUID</th>
        <th>Name</th>
        <th>Date of Birth</th>
        <th>Score</th>
        <th>Salary</th>
        <th>Active</th>
        <th>Comment</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (person of persons; track person.uuid) {
        <tr class="pointer" (click)="viewPerson(person.uuid)">
          <td data-cy="cell-uuid">{{ person.uuid }}</td>
          <td data-cy="cell-name">{{ person.name }}</td>
          <td data-cy="cell-dateOfBirth">{{ person.dateOfBirth }}</td>
          <td data-cy="cell-score">{{ person.score }}</td>
          <td data-cy="cell-salary">{{ person.salary | number:'1.2-2' }}</td>
          <td data-cy="cell-active">
            @if (person.active) {
              <span class="badge bg-success">Active</span>
            } @else {
              <span class="badge bg-secondary">Inactive</span>
            }
          </td>
          <td data-cy="cell-comment">{{ person.comment || '-' }}</td>
          <td>
            <button class="btn btn-sm btn-info me-1" (click)="viewPerson(person.uuid)" data-cy="button-view" title="View">
              <i class="bi bi-eye"></i>
            </button>
            <button class="btn btn-sm btn-warning me-1" (click)="editPerson(person.uuid)" data-cy="button-edit" title="Edit">
              <i class="bi bi-pencil"></i>
            </button>
            <button class="btn btn-sm btn-danger" (click)="deletePerson(person.uuid)" data-cy="button-delete" title="Delete">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="8" class="text-center">No persons found</td>
        </tr>
      }
    </tbody>
  </table>
}
