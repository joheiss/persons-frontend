<h2>Edit Person</h2>

@if (loading) {
  <div class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
} @else if (person) {
  <form [formGroup]="editForm" (ngSubmit)="save()">
    <div class="card">
      <div class="card-body">
        <div class="mb-3">
          <label class="form-label fw-bold">UUID:</label>
          <input type="text" data-cy="input-uuid" class="form-control" [value]="person.uuid" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Name:</label>
          <input type="text" data-cy="input-name" class="form-control" formControlName="name">
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Date of Birth:</label>
          <input type="text" data-cy="input-dateOfBirth" class="form-control" [value]="person.dateOfBirth" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Score:</label>
          <input type="text" data-cy="input-score" class="form-control" [value]="person.score" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Salary:</label>
          <input type="number" step="0.01" data-cy="input-salary" class="form-control" formControlName="salary">
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Active:</label>
          <input type="text" data-cy="input-active" class="form-control" [value]="person.active ? 'Active' : 'Inactive'" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Comment:</label>
          <textarea data-cy="input-comment" class="form-control" formControlName="comment" rows="3"></textarea>
        </div>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving" data-cy="button-cancel">CANCEL</button>
          <button type="submit" class="btn btn-primary" [disabled]="saving" data-cy="button-save">
            @if (saving) {
              <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            }
            SAVE
          </button>
        </div>
      </div>
    </div>
  </form>
} @else {
  <div class="alert alert-warning">Person not found</div>
  <button class="btn btn-primary" (click)="cancel()">BACK</button>
}
